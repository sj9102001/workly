spring.application.name=Workly

# Database configuration - supports environment variables or defaults to docker postgres
# If DB_URL is set in .env, it will be used; otherwise, use docker postgres
spring.datasource.url=${DB_URL:jdbc:postgresql://postgres:5432/workly}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${DB_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false

# JWT - supports environment variables
app.jwt.secret=${JWT_SECRET:CHANGE_ME_TO_A_LONG_RANDOM_SECRET_AT_LEAST_32_CHARS}
app.jwt.access-minutes=${JWT_ACCESS_MINUTES:15}
app.jwt.refresh-days=${JWT_REFRESH_DAYS:14}

# Refresh cookie (set true in prod with https)
app.cookie.secure=${COOKIE_SECURE:false}
app.cookie.same-site=${COOKIE_SAME_SITE:Strict}

app.invite.days=${INVITE_DAYS:7}

# Actuator/Profiling configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env,beans,configprops
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
management.server.port=8081

# kafka
app.kafka.enabled=${KAFKA_ENABLED:true}
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
app.kafka.topics.org-events=${KAFKA_TOPIC_ORG_EVENTS:org.events}
app.kafka.producer.client-id=${KAFKA_CLIENT_ID:workly-backend}
app.kafka.topics.partitions=${KAFKA_TOPIC_PARTITIONS:3}
app.kafka.topics.replication-factor=${KAFKA_TOPIC_REPLICATION_FACTOR:1}
app.kafka.consumer.groups.notifications=workly-notifications
app.kafka.consumer.groups.email=workly-email

# outbox polling
app.outbox.poll-ms=${OUTBOX_POLL_MS:1000}
app.outbox.batch-size=${OUTBOX_BATCH_SIZE:50}
app.outbox.max-attempts=${OUTBOX_MAX_ATTEMPTS:5}

# kafka producer send timeout
app.kafka.producer.send-timeout-seconds=${KAFKA_SEND_TIMEOUT_SECONDS:30}

# kafka consumer
app.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP_ID:workly-backend-consumer}
logging.level.org.springframework.kafka=INFO
logging.level.org.springframework.kafka.listener=INFO
logging.level.org.apache.kafka.clients.consumer.internals=INFO

# Hibernate logs
logging.level.org.hibernate=OFF